---
title: "Claude Code - SuperClaude ã‚’ä½¿ã£ã¦ Terraform æ›¸ã„ã¦ã¿ãŸ"
emoji: "ğŸ”–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Claude", "Terraform", "SuperClaude"]
published: true
---

ã“ã‚“ã«ã¡ã¯ã€‚  
ã”æ©Ÿå«Œã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚  
"No human labor is no human error" ãŒå¤§å¥½ããª[å‰äº• äº®](https://twitter.com/YoshiiRyo1)ã§ã™ã€‚  

VibeCoding/VibeOps ã‚’æ¥µã‚ã‚‹ã¹ãã€Terraform ã‚‚ Coding Agent ã«æ›¸ã„ã¦ã‚‚ã‚‰ã†ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚  
è©¦è¡ŒéŒ¯èª¤ã—ãªãŒã‚‰æœ€é©ãªæ–¹æ³•ã‚’æ¨¡ç´¢ã—ã¦ã„ã‚‹ã¨ã“ã‚ã§ã™ã€‚  

ä»Šå›ã¯ Claude Code ï¼† SuperClaude ã‚’ä½¿ã£ã¦ Terraform ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚  

## SuperClaude

Claude Code ã‚’æ‹¡å¼µã™ã‚‹å¼·åŠ›ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚  
æœ¬æ¥ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«å¼·ã¿ã‚’ç™ºæ®ã™ã‚‹ã¯ãšãªã®ã§ã€é–‹ç™ºè€…ã®æ–¹ã‚‚èˆˆå‘³ãŒã‚ã‚Œã°ãœã²è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚  

https://github.com/SuperClaude-Org/SuperClaude_Framework

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¯ä¸Šã®å…¬å¼ãƒªãƒã‚¸ãƒˆãƒªã‚’å‚ç…§ãã ã•ã„ã€‚  

ç§ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ç½®ã„ã¦ã€è¤‡æ•°äººã§åŒã˜ SuperClaude ç’°å¢ƒã‚’ä½¿ã„ãŸã‹ã£ãŸã®ã§ä¸Šã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒªãƒã‚¸ãƒˆãƒªé…ä¸‹ã¸æ‰‹å‹•ã‚³ãƒ”ãƒ¼ã—ã¦ã„ã¾ã™ã€‚  
ã‚³ãƒ”ãƒ¼å¾Œã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã¾ã™ã€‚  

```bash
.claude
â”œâ”€â”€ CLAUDE.md
â”œâ”€â”€ commands
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ analyze.md
â”‚   â”œâ”€â”€ build.md
â”‚   â”œâ”€â”€ cleanup.md
â”‚   â”œâ”€â”€ design.md
â”‚   â”œâ”€â”€ document.md
â”‚   â”œâ”€â”€ estimate.md
â”‚   â”œâ”€â”€ explain.md
â”‚   â”œâ”€â”€ git.md
â”‚   â”œâ”€â”€ implement.md
â”‚   â”œâ”€â”€ improve.md
â”‚   â”œâ”€â”€ index.md
â”‚   â”œâ”€â”€ load.md
â”‚   â”œâ”€â”€ spawn.md
â”‚   â”œâ”€â”€ task.md
â”‚   â”œâ”€â”€ test.md
â”‚   â”œâ”€â”€ troubleshoot.md
â”‚   â””â”€â”€ workflow.md
â”œâ”€â”€ COMMANDS.md
â”œâ”€â”€ FLAGS.md
â”œâ”€â”€ hooks
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ PLACEHOLDER.py
â”œâ”€â”€ MCP.md
â”œâ”€â”€ MODES.md
â”œâ”€â”€ ORCHESTRATOR.md
â”œâ”€â”€ PERSONAS.md
â”œâ”€â”€ PRINCIPLES.md
â”œâ”€â”€ RULES.md
â””â”€â”€ settings.local.json
```

## mcp.json

ã‚ªãƒªã‚¸ãƒŠãƒ«ã§ã¯ Playwright ã‚„ Magic ã‚’ä½¿ã£ã¦ã„ã¾ã™ãŒã€IaC ã§ã¯ä¸è¦ã ã¨æ€ã£ã¦ã„ã‚‹ã®ã§ã€ãã‚Œã‚‰ã¯é™¤ã„ã¦ã„ã¾ã™ã€‚  
Terraform ã‚’ä½¿ã†ã®ã§ `awslabs.terraform-mcp-server` ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚ã“ã‚ŒãŒã‚‚ã†ä¾¿åˆ©ã§ã€AWS ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹éš›ã«ã¯æ¬ ã‹ã›ã¾ã›ã‚“ã€‚  

```json:.mcp.json
{
	"mcpServers": {
		"awslabs.aws-documentation-mcp-server": {
			"command": "uvx",
			"args": [
				"awslabs.aws-documentation-mcp-server@latest"
			],
			"env": {
				"FASTMCP_LOG_LEVEL": "ERROR",
				"AWS_DOCUMENTATION_PARTITION": "aws"
			},
			"disabled": false,
			"autoApprove": []
		},
		"awslabs.terraform-mcp-server": {
			"command": "uvx",
			"args": [
				"awslabs.terraform-mcp-server@latest"
			],
			"env": {
				"FASTMCP_LOG_LEVEL": "ERROR"
			},
			"disabled": false,
			"autoApprove": []
		},
		"Context7": {
			"command": "npx",
			"args": [
				"-y",
				"@upstash/context7-mcp"
			]
		},
		"sequential-thinking": {
			"command": "npx",
			"args": [
				"-y",
				"@modelcontextprotocol/server-sequential-thinking"
			]
		}
	}
}
```

## MCP.md

MCP Server ã‚’è¿½åŠ ã—ãŸã®ã§ã€`.claude/MCP.md` ã«ãã‚Œã‚‰ã®èª¬æ˜ã‚’è¿½è¨˜ã—ã¾ã™ã€‚  

```markdown:.claude/MCP.md
## AWS Documentation Integration (Official AWS Docs)

**Purpose**: Authoritative AWS service documentation lookups, examples, API semantics, limits, and best practices using the awslabs.aws-documentation-mcp-server.

**Activation Patterns**:
- Automatic: AWS service/resource names detected (e.g., S3, IAM, EKS), IaC referencing AWS resources, cloud architecture questions
- Manual: `--aws-docs`, `--awsdocs`, `/docs aws <topic>` flags
- Smart: When an answer must cite official AWS docs or clarify version/partition specifics

**Workflow Process**:
1. Topic Detection: Identify AWS service and specific concept (feature, quota, API, example)
2. Search: Query AWS documentation for the topic (high-relevance results first)
3. Read: Fetch and convert the selected page to markdown for citation and pattern extraction
4. Explore Related: Pull recommendations for adjacent or commonly-followed pages
5. Pattern Extraction: Extract steps, code samples, configuration blocks
6. Validation: Align implementation with official guidance and note constraints/quotas
7. Caching: Store key references for reuse in the session

**Primary Operations**:
- Search AWS Docs: Targeted search across AWS documentation corpus
- Read Page: Retrieve full page content (markdown), with chunking for long documents
- Recommend: Related/highly-rated/similar/journey pages for broader context

**Error Recovery**:
- Domain/URL constraints â†’ Re-scope search terms or fallback to cached knowledge
- Truncated long pages â†’ Continue reading with next chunk index
- Partition differences â†’ Respect configured partition (env: `AWS_DOCUMENTATION_PARTITION`)
- Server unavailable â†’ Graceful degradation with known patterns; note limitations

## Terraform Integration (AWS IaC Research & Validation)

**Purpose**: Terraform/Terragrunt research, provider/resource docs lookup, module discovery, and security scanning guidance using the awslabs.terraform-mcp-server.

**Activation Patterns**:
- Automatic: Terraform files detected (`.tf`, Terragrunt), provider/resource questions, IaC review requests
- Manual: `--tf`, `--terraform`, `/tf <action>` flags
- Smart: When selecting modules, comparing resources, or planning security scans

**Workflow Process**:
1. Resource Identification: Detect providers (AWS/AWSCC) and resources/data sources in question
2. Provider Docs: Retrieve AWS Provider or AWS Cloud Control (AWSCC) docs for arguments, attributes, and examples
3. Module Discovery: Search AWS-IA curated modules and user-provided registry modules; enumerate inputs/outputs
4. Security Scan Planning: Prepare Checkov rules of interest and expected failure classes
5. Execution Assistance: Outline safe `init/plan/apply/destroy` or Terragrunt equivalents with state/backends
6. Synthesis: Summarize compatibility notes, version pins, deprecations, and migration paths
7. Caching: Keep frequently-used resources/modules for quick reuse

**Capabilities**:
- Terraform Commands: init/plan/apply/destroy (with careful, opt-in execution guidance)
- Terragrunt Commands: orchestration over multiple modules
- Security: Checkov scan planning and interpretation of common findings
- Docs Lookup: AWS Provider and AWSCC resource/data source docs
- Module Search: AWS-IA curated modules and arbitrary registry modules, with IO summary

**Error Recovery**:
- Version mismatch (provider/module) â†’ Suggest compatible versions or upgrade/downgrade paths
- Module not found/insufficient docs â†’ Propose closest alternatives; escalate to provider docs
- Init/lock/state errors â†’ Recommend backend/state remediation steps (without destructive actions)
- Scan timeouts â†’ Retry with scoped directories/rule sets; provide partial results
```

## PERSONA.md

`.claude/PERSONA.md` ã«ãƒšãƒ«ã‚½ãƒŠãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚  
`--persona-devops` ã® MCP Server éƒ¨åˆ†ã‚’å°‘ã—ä¿®æ­£ã—ã¾ã™ã€‚`awslabs.aws-documentation-mcp-server` ã¨ `awslabs.terraform-mcp-server` ã‚’å„ªå…ˆçš„ã«ä½¿ã£ã¦ã‚‚ã‚‰ãˆã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚   

ã“ã®ãƒšãƒ«ã‚½ãƒŠãŒ SuperClaude ã‚’ä½¿ã†åˆ©ç‚¹ã®ã†ã¡ã®ä¸€ã¤ã§ã™ã€‚  

```markdown:.claude/PERSONA.md
## `--persona-devops`

**Identity**: Infrastructure specialist, deployment expert, reliability engineer

**Priority Hierarchy**: Automation > observability > reliability > scalability > manual processes

**Core Principles**:
1. **Infrastructure as Code**: All infrastructure should be version-controlled and automated
2. **Observability by Default**: Implement monitoring, logging, and alerting from the start
3. **Reliability Engineering**: Design for failure and automated recovery

**Infrastructure Automation Strategy**:
- **Deployment Automation**: Zero-downtime deployments with automated rollback
- **Configuration Management**: Infrastructure as code with version control
- **Monitoring Integration**: Automated monitoring and alerting setup
- **Scaling Policies**: Automated scaling based on performance metrics

**MCP Server Preferences**:
- **Primary**: aws-doc - For aws best practices 
- **Secondary**: terraform - For code-base architectural analysis and infrastructure patterns
- **Tertiary**: Sequential - For comprehensive architectural analysis
- **Quaternary**: Context7 - For architectural patterns and best practices

**Optimized Commands**:
- `/git` - Version control workflows and deployment coordination
- `/analyze --focus infrastructure` - Infrastructure analysis and optimization

**Auto-Activation Triggers**:
- Keywords: "deploy", "infrastructure", "automation"
- Deployment or infrastructure work
- Monitoring or observability mentioned

**Quality Standards**:
- **Automation**: Prefer automated solutions over manual processes
- **Observability**: Implement comprehensive monitoring and alerting
- **Reliability**: Design for failure and automated recovery
```

## CLAUDE.md

`.claude/CLAUDE.md` ã‚’æ›´æ–°ã—ã¾ã™ã€‚`RULES.md` ã¨ã‹ã«æ›¸ã„ãŸã»ã†ãŒè‰¯ã•ãã†ã§ã™ãŒã€ä»Šã¯æ°—ã«ã—ãªã„ã“ã¨ã«ã—ã¾ã™ã€‚  
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚ˆã£ã¦ã¯ç©ã¿é‡ã­ã¦ããŸç§˜ä¼ã®ãƒ«ãƒ¼ãƒ«ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ï¼ˆä¸‹ã®ä¾‹ã¯ç”Ÿæˆ AI ã«ä½œã£ã¦ã‚‚ã‚‰ã„ã¾ã—ãŸãŒâ€¦ï¼‰  


```markdown:.claude/CLAUDE.md
---
title: CLAUDE.md
created_at: 2025-07-29 09:08:00
updated_at: 2025-08-12 16:43:00
---

# CLAUDE.md

## SuperClaude Entry Point

@COMMANDS.md
@FLAGS.md
@PRINCIPLES.md
@RULES.md
@MCP.md
@PERSONAS.md
@ORCHESTRATOR.md
@MODES.md

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

terraform

## Terraform ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯å†åˆ©ç”¨å¯èƒ½ãªå½¢å¼ã§ä½œæˆã™ã‚‹
- Terraform ãƒªã‚½ãƒ¼ã‚¹ã«å¿…è¦ãªè¨­å®šå€¤ã¯ã™ã¹ã¦å¤‰æ•°ã¨ã™ã‚‹
- å‡ºåŠ›ã¯å¿…ãšå®šç¾©ã—ã€å¿…è¦ã«å¿œã˜ã¦ä»–ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
- å¿…é ˆã§ã¯ãªã„è¨­å®šé …ç›®ã¯ Dynamic Blocks ã‚’ä½¿ã£ã¦å‹•çš„ã«æ§‹æˆã™ã‚‹

ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¯ä»¥ä¸‹ã¨ã™ã‚‹ã€‚  

- Terraform ãƒªã‚½ãƒ¼ã‚¹å
    - `README.md`: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä½¿ã„æ–¹ã‚„æ³¨æ„ç‚¹ã‚’è¨˜è¼‰
    - `main.tf`: ãƒªã‚½ãƒ¼ã‚¹ã®å®šç¾©
    - `variables.tf`: å¤‰æ•°ã®å®šç¾©
    - `outputs.tf`: å‡ºåŠ›ã®å®šç¾©

ä¾‹ï¼‰

â””â”€â”€ modules
    â”œâ”€â”€ iam_role
        â”œâ”€â”€ README.md
        â”œâ”€â”€ main.tf
        â”œâ”€â”€ variables.tf
        â””â”€â”€ outputs.tf

## Terraform å‘½åè¦ç´„

Terraform æ§‹æˆã®å¯èª­æ€§ã¨ä¿å®ˆæ€§å‘ä¸Šã®ãŸã‚ã€ä»¥ä¸‹ã®å‘½åè¦ç´„ã‚’æ¡ç”¨ã™ã‚‹ã€‚

- ç·å‰‡
    - å°æ–‡å­—ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹ï¼ˆa-z, 0-9, ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ï¼‰ã€‚å…ˆé ­ã¯è‹±å­—ã€‚ãƒã‚¤ãƒ•ãƒ³ã¯ä½¿ã‚ãªã„ã€‚
    - æ„å‘³ã®ã‚ã‚‹åè©ã‚’ç”¨ã„ã€ã‚¿ã‚¤ãƒ—åã‚„å†—é•·ãªæ¥é ­è¾ã¯å…¥ã‚Œãªã„ï¼ˆä¾‹: "aws_instance" ã®ãƒªã‚½ãƒ¼ã‚¹åã« "aws" ã‚„ "instance" ã‚’å«ã‚ãªã„ï¼‰ã€‚
    - ç’°å¢ƒãƒ»é ˜åŸŸãªã©ã®å±æ€§ã¯æ¥å°¾è¾ã§è¡¨ç¾ï¼ˆä¾‹: `_prod`, `_stg`, `_dev`ï¼‰ã€‚

- ãƒªã‚½ãƒ¼ã‚¹ï¼ˆresourceï¼‰
    - å½¢å¼: `resource "<provider>_<type>" "<name>" { ... }`
    - `<name>` ã¯æ©Ÿèƒ½/å½¹å‰²ã‚’è¡¨ã™åè©ï¼ˆä¾‹: `web_api`, `bastion`, `app_lb`ï¼‰ã€‚
    - `for_each` ä½¿ç”¨æ™‚ã¯ã‚­ãƒ¼ã®ä¸€æ„æ€§ã‚’æ‹…ä¿ã—ã€`each.key` ã‚’åå‰ã‚„ã‚¿ã‚°ã«åæ˜ ã€‚
    - ãƒã‚¹ãƒˆé †åº: ãƒ¡ã‚¿å¼•æ•° â†’ å¼•æ•° â†’ ãƒã‚¹ãƒˆãƒ–ãƒ­ãƒƒã‚¯ â†’ ãƒ¡ã‚¿å¼•æ•°ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆ`lifecycle` ãªã©ï¼‰ã¯æœ€å¾Œã€‚

- ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ï¼ˆdataï¼‰
    - ä¾å­˜ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¯ã€å‚ç…§ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã‚ˆã‚Šä¸Šã«é…ç½®ã€‚
    - åç§°ã¯å–å¾—å¯¾è±¡ã‚’è¡¨ã™åè©ï¼ˆä¾‹: `ami_web`, `az_available`ï¼‰ã€‚

- å¤‰æ•°ï¼ˆvariableï¼‰
    - `locals` ã‚’åˆ©ç”¨ã€`variables` ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã®ã¿ä½¿ç”¨ã€‚
    - type, description ã‚’å¿…é ˆè¨˜è¼‰
    - ãƒ–ãƒ¼ãƒ«å€¤ã¯ `enable_`/`disable_` ã‚ˆã‚Š `enable_` ã‚’æ¨å¥¨ï¼ˆä¾‹: `enable_public_access`ï¼‰ã€‚
    - æ•°é‡ã¯å˜æ•°åï¼ˆä¾‹: `instance_count`ï¼‰ã€ãƒªã‚¹ãƒˆ/ãƒãƒƒãƒ—ã¯å†…å®¹ãŒåˆ†ã‹ã‚‹è¤‡æ•°åï¼ˆä¾‹: `subnet_ids`, `tags`ï¼‰ã€‚
    - æ©Ÿå¯†ã¯ `sensitive = true` ã‚’æ˜ç¤ºã€‚

- ãƒ­ãƒ¼ã‚«ãƒ«ï¼ˆlocalsï¼‰
    - å†åˆ©ç”¨ã™ã‚‹å¼/å…±é€šãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚„ã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’è¡¨ç¾ï¼ˆä¾‹: `name_suffix`, `tags_common`ï¼‰ã€‚
    - å¤‰æ•°ã‚„ãƒ­ãƒ¼ã‚«ãƒ«ã®éå‰°ä½¿ç”¨ã¯é¿ã‘ã€èª­ã¿ã‚„ã™ã•ã‚’å„ªå…ˆã€‚

- å‡ºåŠ›ï¼ˆoutputï¼‰
    - åç§°ã¯å†…å®¹ã‚’åæ˜ ï¼ˆä¾‹: `web_public_ip`, `vpc_id`ï¼‰ã€‚
    - `description` ã‚’å¿…ãšè¨˜è¼‰ã€‚ç§˜åŒ¿æƒ…å ±ã®å‡ºåŠ›ã¯ç¦æ­¢ã€‚

- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆmoduleï¼‰
    - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã¯æ©Ÿèƒ½å˜ä½ï¼ˆä¾‹: `vpc`, `subnets`, `iam_role`ï¼‰ã€‚
    - å…¥å‡ºåŠ›ã¯ä¸Šè¨˜ã® variable/output è¦ç´„ã«å¾“ã†ã€‚
    - ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’æ¸¡ã™å ´åˆã¯ `providers` ãƒ–ãƒ­ãƒƒã‚¯ã§æ˜ç¤ºï¼ˆä¾‹: `aws = aws.west`ï¼‰ã€‚

- ãƒ—ãƒ­ãƒã‚¤ãƒ€ï¼ˆproviderï¼‰
    - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’å¿…ãšç”¨æ„ã€‚è¤‡æ•°ãƒªãƒ¼ã‚¸ãƒ§ãƒ³/ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ `alias` ã‚’çŸ­ãæ„å‘³ã®ã‚ã‚‹åã§ï¼ˆä¾‹: `aws.west`, `aws.audit`ï¼‰ã€‚

- ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª/ãƒ•ã‚¡ã‚¤ãƒ«
    - å…±æœ‰ãƒ»å†åˆ©ç”¨ã‚³ãƒ¼ãƒ‰ã¯ `modules/` é…ä¸‹ã«ç½®ãã€‚ç’°å¢ƒã§åˆ†ã‘ã‚‹å ´åˆã¯ç’°å¢ƒãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ state/backend/vars ã‚’åˆ†é›¢ã€‚

- ã‚¿ã‚°/Name å‘½åï¼ˆAWS ä¾‹ï¼‰
    - æœ€ä½é™: `Name`, `Environment`ã€‚
    - `Name` ã¯ `<system>-<component>-<env>[-<suffix>]` ã‚’æ¨å¥¨ï¼ˆä¾‹: `peg-api-stg-01`ï¼‰ã€‚
    - ã‚¿ã‚°å€¤ç”Ÿæˆã¯ãƒ­ãƒ¼ã‚«ãƒ«ã§çµ±ä¸€ï¼ˆä¾‹: `local.tags_common`ï¼‰ã€‚

- Do / Don't ä¾‹
    - âœ… `resource "aws_instance" "web_api" { ... }`
    - âŒ `resource aws_instance webAPI-aws-instance { ... }`ï¼ˆã‚¯ã‚©ãƒ¼ãƒˆ/ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹/ã‚¿ã‚¤ãƒ—é‡è¤‡ã®é•åï¼‰
    - âœ… `variable "db_password" { sensitive = true }`
    - âœ… `output "web_public_ip" { description = "Public IP of web" }`

- ãƒãƒªã‚·ãƒ¼è¨˜è¿°æ–¹æ³•
    - `jsonencode()` ã‚’ä½¿ç”¨ã—ã¦ãƒãƒªã‚·ãƒ¼ã‚’è¨˜è¿°ã™ã‚‹

- ç¦æ­¢è¡Œç‚º
    - `count` ã¯ä½¿ç”¨ã—ãªã„ã€‚ä»£ã‚ã‚Šã« `for_each` ã‚’ä½¿ç”¨ã™ã‚‹ã€‚

- å‚è€ƒï¼ˆç¤¾å†…é‹ç”¨ã®åŸºæº–ï¼‰
    - ã‚³ãƒŸãƒƒãƒˆå‰ã« `terraform fmt` ã¨ `terraform validate` ã‚’å®Ÿæ–½ã€‚
    - å¤§é‡ä½œæˆã¯ `for_each` ã‚’å„ªå…ˆã—ã€ã‚­ãƒ¼ã¯å®‰å®šçš„ã§è¡çªã—ãªã„å€¤ã‚’æ¡ç”¨ã€‚
    - ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹/ç’°å¢ƒåã¯ä¸€è²«ã—ãŸæ¥å°¾è¾ï¼ˆä¾‹: `-dev`, `-stg`, `-prod`ï¼‰ã‚’ç”¨ã„ã‚‹ã€‚

## ãƒ•ã‚¡ã‚¤ãƒ«ä¸­ã®èª¬æ˜æ–‡

èª¬æ˜æ–‡ã¯æ—¥æœ¬èªã§è¨˜è¿°ã™ã‚‹ã“ã¨ã€‚

```

## æŒ‡ç¤ºæ›¸

ä¸Šã¾ã§ã§ SuperClaude ã®æº–å‚™ã¯å®Œäº†ã§ã™ã€‚  
ä»Šå›ã¯ GitHub Actions ã§ä½¿ã† OIDC ãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®æŒ‡ç¤ºæ›¸ã‚’ä½œæˆã—ã¾ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã“ã‚Œã‹ã‚‰å§‹ã¾ã‚‹ã¨ã„ã£ãŸæ„Ÿã˜ã§ã™ã­ï¼  
åˆ¥ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ã£ãŸã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ãŸã»ã†ãŒæ—©ã„ã ã‚ã€ã¨ã„ã†ãƒ„ãƒƒã‚³ãƒŸã¯è»½ãæµã—ã¦ãŠã„ã¦ã‚„ã£ã¦ã„ãã¾ã™ã€‚  
ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `todos/oidc_github.md` ã¨ã—ã¦ä½œæˆã—ã¾ã™ã€‚  


```markdown:todos/oidc_github.md
---
title: GitHub OIDC ãƒ­ãƒ¼ãƒ«
created_at: 2025-08-12 15:13:00
updated_at: 2025-08-12 15:13:00
---

# ã‚¿ã‚¹ã‚¯

GitHub Actions ã‹ã‚‰ AWS ã¸ OIDC ãƒ­ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹ã€‚
[å‚è€ƒ](#å‚è€ƒ) ã«è¨˜è¼‰ã—ãŸæ‰‹é †ã«å¾“ã†ã“ã¨ã€‚

# ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

`terraform/aws/modules`

# ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã« `oidc_github` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã€‚

# å‚è€ƒ

https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_create_oidc.html  
https://docs.github.com/ja/actions/how-tos/secure-your-work/security-harden-deployments/oidc-in-aws
```

## Claude Code

ãã‚Œã§ã¯ Claude Code ã‚’èµ·å‹•ã—ã¾ã™ã€‚  

[SuperClaude User Guide](https://github.com/SuperClaude-Org/SuperClaude_Framework/blob/master/Docs/superclaude-user-guide.md) ã‚’è¦‹ã‚‹ã¨ `Task Management Mode` ãŒã‚ã‚Šã¾ã™ã€‚  

> What it is: Structured workflow execution with progress tracking and validation.
> 
> When it's used: Any multi-step operation that needs tracking and coordination.
> 
> How it works: SuperClaude breaks work into manageable tasks, tracks progress, and ensures quality through validation gates.


è‰¯ã•ãã†ã§ã™ã€‚3ç¨®é¡ã®ãƒ¢ãƒ¼ãƒ‰ãŒã‚ã‚‹ã‚‰ã—ã„ã®ã§ä»Šå¾Œã‚‚è©¦ã—ã¦ã¿ã¾ã™ã€‚

```bash
> @./claude/CLAUDE.me
# ã—ã°ã‚‰ãå¾…ã¤

> /sc:task create @todos/oidc_github.md --persona-devops

~~çœç•¥ã€œã€œ
âº Now I'll create a comprehensive todo list for building this GitHub OIDC module:

âº Update Todos
  â¿  â˜ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã®ç¢ºèªã¨ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ 
     â˜ GitHub OIDC ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ãŸã‚ã® main.tf ã‚’ä½œæˆ
     â˜ å…¥åŠ›å¤‰æ•°ã®ãŸã‚ã® variables.tf ã‚’ä½œæˆ
     â˜ å‡ºåŠ›å€¤ã®ãŸã‚ã® outputs.tf ã‚’ä½œæˆ
     â˜ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

ã€œã€œçœç•¥ã€œã€œ
```

----

5åˆ†ãã‚‰ã„å¾…ã¤ã¨ Terraform ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚  
ä»Šå›ã¯æŒ‡ç¤ºå†…å®¹ãŒå°‘ãªãç°¡å˜ã ã£ãŸãŸã‚ã€æ•°è¡Œã®ä¿®æ­£ã§ Apply ã§ãã‚‹ãƒ¬ãƒ™ãƒ«ã®ã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚  
ï¼ˆã“ã®å¾…ã¡æ™‚é–“ã¯çš†ã•ã‚“ã©ã†ã—ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿæš‡ã§ã™ã‚ˆã­ï¼‰  

## VPCä½œã£ã¦ã¿ãŸ

ç°¡å˜ãªã¨ã“ã‚ã§ VPC ã‚’ä½œæˆã—ã¦ã¿ã¾ã™ã€‚  

æŒ‡ç¤ºæ›¸ã§ã™ã€‚  

```markdown:todos/modules/vpc.md
---
title: VPC
created_at: 2025-08-13 10:20:00
updated_at: 2025-08-13 10:20:00
---

# ã‚¿ã‚¹ã‚¯

VPC ã‚’ä½œæˆã™ã‚‹ã€‚
 
# VPC è¨­è¨ˆ

- AWSãƒªãƒ¼ã‚¸ãƒ§ãƒ³: å¤‰æ•°ã‹ã‚‰å–å¾—
- VPC åç§°: å¤‰æ•°ã‹ã‚‰å–å¾—
- CIDR: å¤‰æ•°ã‹ã‚‰å–å¾—
- ã‚¢ãƒ™ã‚¤ãƒ©ãƒ“ãƒªãƒ†ã‚£ã‚¾ãƒ¼ãƒ³: ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®åˆ©ç”¨å¯èƒ½ãªã‚¢ãƒ™ã‚¤ãƒ©ãƒ“ãƒªãƒ†ã‚£ã‚¾ãƒ¼ãƒ³ã‚’ã™ã¹ã¦åˆ©ç”¨
- ã‚µãƒ–ãƒãƒƒãƒˆ: å„ã‚¢ãƒ™ã‚¤ãƒ©ãƒ“ãƒªãƒ†ã‚£ã‚¾ãƒ¼ãƒ³ã«å¯¾ã—ã¦1ã¤ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚µãƒ–ãƒãƒƒãƒˆã¨1ã¤ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚µãƒ–ãƒãƒƒãƒˆã‚’ä½œæˆ
- NACL: ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚µãƒ–ãƒãƒƒãƒˆã¨ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚µãƒ–ãƒãƒƒãƒˆã«å¯¾ã—ã¦ãã‚Œãã‚Œç•°ãªã‚‹NACLã‚’è¨­å®šã€ãƒ«ãƒ¼ãƒ«ã¯å¤‰æ•°ã‹ã‚‰å–å¾—ã—å‹•çš„ã«ç”Ÿæˆ
- ãƒ«ãƒ¼ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«: å„ã‚µãƒ–ãƒãƒƒãƒˆã«å¯¾ã—ã¦ãã‚Œãã‚Œãƒ«ãƒ¼ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¨­å®šã€ãƒ«ãƒ¼ãƒˆã¯å¤‰æ•°ã‹ã‚‰å–å¾—ã—å‹•çš„ã«ç”Ÿæˆ
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤: VPCã«1ã¤ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã‚’ä½œæˆã—ã€ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚µãƒ–ãƒãƒƒãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ«ãƒ¼ãƒˆã‚’è¨­å®š
- NATã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤: ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤æ•°ã¯å¤‰æ•°ã‹ã‚‰å–å¾—ã—å‹•çš„ã«ç”Ÿæˆ
    - ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤æ•°ãŒ1ã¤ã®å ´åˆã¯ã€å…¨ã¦ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ«ãƒ¼ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ«ãƒ¼ãƒˆã‚’è¨­å®š
    - ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤æ•°ãŒã‚µãƒ–ãƒãƒƒãƒˆæ•°ã¨åŒæ•°ã®å ´åˆã¯ã€å„ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚µãƒ–ãƒãƒƒãƒˆã«å¯¾ã—ã¦å€‹åˆ¥ã®NATã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã‚’è¨­å®šã—ã€ãƒ«ãƒ¼ãƒˆã‚’è¨­å®š
- VPCãƒ•ãƒ­ãƒ¼ãƒ­ã‚°: VPCã«å¯¾ã—ã¦ãƒ•ãƒ­ãƒ¼ãƒ­ã‚°ã‚’æœ‰åŠ¹åŒ–
    - ä¿å­˜å…ˆS3ãƒã‚±ãƒƒãƒˆåã¯å¤‰æ•°ã‹ã‚‰å–å¾—
    - ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ã€€[Version7](https://docs.aws.amazon.com/vpc/latest/userguide/flow-log-records.html) ã§ä½¿ãˆã‚‹å…¨ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å«ã‚ã‚‹ã“ã¨

# ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

`terraform/aws/modules`

# ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã« `vpc` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã€‚
```

æŒ‡ç¤ºæ›¸ãŒã§ããŸã¨ã“ã‚ã§ã€Claude Code ã« VPC ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚  
`oidc_github` ã¯ `/sc:task` ã‚’ä½¿ã„ã¾ã—ãŸã€‚ä»Šåº¦ã¯ `/sc:build` ã‚’ä½¿ã„ã¾ã™ã€‚`/sc:task` ã‚ˆã‚Šè»½ã‚ã®ã‚¿ã‚¹ã‚¯ã«é©ã—ã¦ã„ã‚‹ãƒ¢ãƒ¼ãƒ‰ã®ã‚ˆã†ã§ã™ã€‚  

```bash
> /sc:build is @todos/modules/vpc.md --persona-devops

âº I'll help you build a comprehensive VPC Terraform module based on the specifications in your todo document. Let me start by
  creating a task list and then implement the VPC module.

âº Update Todos
  â¿  â˜ Check existing Terraform module structure and create VPC directory
     â˜ Create variables.tf with all required VPC configuration variables
     â˜ Create locals.tf for computed values and dynamic configurations
     â˜ Create main.tf with VPC and core networking resources
     â˜ Create subnets.tf for public and private subnet configuration
     â˜ Create nacls.tf for Network ACL configuration
     â˜ Create nat.tf for NAT Gateway configuration
     â˜ Create flow_logs.tf for VPC Flow Logs configuration
     â˜ Create outputs.tf for module outputs
     â˜ Create versions.tf for provider requirements
     â˜ Validate Terraform configuration

ã€œã€œçœç•¥ã€œã€œ
```

ç´°ã‹ã„ã‚¿ã‚¹ã‚¯ã«åˆ†å‰²ã—ãªãŒã‚‰ tf ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ãã‚Œã¦ã„ã¾ã™ã€‚  
ã“ã¡ã‚‰ã‚‚æ•°è¡Œã®ä¿®æ­£ã§ Apply ã§ãã‚‹ãƒ¬ãƒ™ãƒ«ã®ã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚
ä¿®æ­£ç®‡æ‰€ã‚‚æŒ‡ç¤ºæ›¸ã‚’ã‚‚ã†å°‘ã—ç´°ã‹ãæ›¸ã„ã¦ã„ã‚Œã°è‰¯ã‹ã£ãŸã‚‚ã®ã§ã‚ã‚Šã€éå¸¸ã«æº€è¶³ã§ã™ã€‚  


## ã¾ã¨ã‚

IaC åˆ†é‡ã«ãŠã„ã¦ã‚‚ VibeCoding ãŒæœ‰åŠ¹ãªã“ã¨ãŒè¨¼æ˜ã§ãã¦å¬‰ã—ãæ€ã„ã¾ã™ã€‚  
SuperClaude ã¯ã¾ã ä½¿ã„å§‹ã‚ãŸã°ã‹ã‚Šã§ã™ãŒã€ã“ã‚Œã‹ã‚‰ã‚‚æ³¨ç›®ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚  
