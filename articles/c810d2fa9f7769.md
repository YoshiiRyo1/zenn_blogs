---
title: "SRE ã“ã OpenHands ä½¿ã£ã¦ã¿ãª é£›ã¶ã"
emoji: "ğŸ™†"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["SRE", "OpenHands", "Terraform"]
published: true
---
ã“ã‚“ã«ã¡ã¯ã€‚  
ã”æ©Ÿå«Œã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚  
"No human labor is no human error" ãŒå¤§å¥½ããª[å‰äº• äº®](https://twitter.com/YoshiiRyo1)ã§ã™ã€‚  

Software Development AI Agent æµè¡Œã—ã¦ã„ã¾ã™ã­ã€‚SDAA ã¨ç•¥ã™äººã¯ã„ãªã•ãã†ã§ã™ãŒã€SDAA ã¨ã„ã†ç•¥ç§°ãŒåºƒã¾ã£ã¦ã»ã—ã„ã‚‚ã®ã§ã™ã€‚  
ãã®ã‚ˆã†ãªæµã‚Œã«ä¹—ã‚‹ã¹ãã€SRE ã¨ã•ã‚Œã¦ã„ã‚‹ç§ã‚‚ SDAA ã‚’ä½¿ã„ã“ãªã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚  

Devin ãŒæœ‰åã§ã™ãŒã€ã‚¹ãƒ¢ãƒ¼ãƒ«ã‚¹ã‚¿ãƒ¼ãƒˆã—ãŸã‹ã£ãŸã®ã§ OSS ã® OpenHands ã‚’ä½¿ã£ã¦ã¿ã¾ã™ã€‚
OpenHands ãŒä½•ã‚’ã—ã¦ãã‚Œã‚‹ã‹ã¯å…¬å¼ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰å¼•ç”¨ã—ã¾ã™ã€‚  

> OpenHands agents can do anything a human developer can: modify code, run commands, browse the web, call APIs, and yesâ€”even copy code snippets from StackOverflow.
>
> Important
> Using OpenHands for work? We'd love to chat! Fill out this short form to join our Design Partner program, where you'll get early access to commercial features and the opportunity to provide input on our product roadmap.

https://github.com/All-Hands-AI/OpenHands  

https://docs.all-hands.dev/modules/usage/getting-started  

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

ãƒ­ãƒ¼ã‚«ãƒ« PC ã§ OpenHands ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’è¡Œã„ã¾ã™ã€‚  

### ãƒ¢ãƒ‡ãƒ«

ãƒ¢ãƒ‡ãƒ«ã¯ Bedrock ã® `anthropic.claude-3-5-sonnet-20241022-v2:0` ã‚’ä½¿ã„ã¾ã™ã€‚  
ãƒ¢ãƒ‡ãƒ«ã‚’æœ‰åŠ¹ã«ã—ã¦ãŠãã¾ã™ã€‚æ‰‹é †ã¯ [Add or remove access to Amazon Bedrock foundation models](https://docs.aws.amazon.com/bedrock/latest/userguide/model-access-modify.html) ã«å¾“ã„ã¾ã™ã€‚  

### Docker Compose

å…¬å¼ã®æ‰‹é †ã§ã¯ Docker ã‚³ãƒãƒ³ãƒ‰ãŒæ¡ˆå†…ã•ã‚Œã¦ã„ã¾ã™ãŒã€å€‹äººçš„ãªå¥½ã¿ã§ Docker Compose ã‚’ä½¿ã„ã¾ã™ã€‚  
ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚  

```bash
.
â”œâ”€â”€ compose.yaml
â”œâ”€â”€ data
â””â”€â”€ openhands-state
```

compose.yaml ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚  
WORKSPACE_MOUNT_PATH ã¯ãƒ•ãƒ«ãƒ‘ã‚¹æŒ‡å®šãŒå¿…è¦ã§ã—ãŸã€‚  
AWS_REGION_NAME ã¯ãŠä½¿ã„ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã§ã™ã€‚  

```yaml
services:
  openhands:
    image: docker.all-hands.dev/all-hands-ai/openhands:0.26
    env_file:
      - .env
    ports:
      - "3000:3000"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./openhands-state:/.openhands-state
      - ./data:/workspace
    environment:
      - SANDBOX_RUNTIME_CONTAINER_IMAGE=docker.all-hands.dev/all-hands-ai/runtime:0.26-nikolaik
      - LOG_ALL_EVENTS=true
      - WORKSPACE_MOUNT_PATH=/openhands/data
      - AWS_REGION_NAME=us-west-2
```

.env ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã‚’è¨˜è¿°ã—ã¾ã™ã€‚  

```text:.env
AWS_SECRET_ACCESS_KEY=your_secret_access_key
AWS_ACCESS_KEY_ID=your_access_key_id
``` 

### GitHub Token

OpenHands ã« GitHub Token ã‚’ç™»éŒ²ã—ã¦ãŠãã¨ã€GitHub ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’æ“ä½œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚  
OpenHands ãŒç”Ÿæˆã—ãŸã‚³ãƒ¼ãƒ‰ã‚’ Push ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚PR ã‚‚ä½œã£ã¦ãã‚Œã¾ã™ã€‚  
[Developer Settings](https://github.com/settings/apps) ã‹ã‚‰ Token ã‚’å–å¾—ã—ã¾ã™ã€‚  

è©³ã—ãã¯ [GitHub Token Setup](https://docs.all-hands.dev/modules/usage/how-to/gui-mode#github-token-setup) ã‚’å‚ç…§ãã ã•ã„ã€‚  

### èµ·å‹•

èµ·å‹•ã—ã¾ã—ã‚‡ã†ã€‚  

```bash
docker-compose up -d
```

`http://localhost:3000` ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ GUI ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚  
åˆå›ã¯ AI Provider ã‚’è¨­å®šã™ã‚‹ç”»é¢ãŒå‡ºã¾ã™ãŒã€Bedrock ã¯ã“ã“ã§è¨­å®šã§ããªã„ã®ã§ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚  

å·¦ä¸‹ã«æ­¯è»Šã‚¢ã‚¤ã‚³ãƒ³ãŒã‚ã‚‹ã®ã§ãã“ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚  

LLM Settings ã« Bedrock ã®ãƒ¢ãƒ‡ãƒ«ã‚’è¨­å®šã—ã¾ã™ã€‚ç”»åƒã®ã‚ˆã†ã«è¨­å®šã—ã¦ãã ã•ã„ã€‚  
æ³¨æ„ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚`API Key` ã«ä½•ã‹ã®æ–‡å­—åˆ—ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚ç©ºæ¬„ã ã¨ã†ã¾ããƒ¢ãƒ‡ãƒ«ã‚’å‘¼ã³å‡ºã—ã¦ãã‚Œã¾ã›ã‚“ã€‚ç§ã¯ã€ŒAWSã€ã¨å…¥ã‚Œã¾ã—ãŸã€‚æ–‡å­—åˆ—ã§ã‚ã‚Œã°ä½•ã§ã‚‚è‰¯ã•ãã†ã§ã™ã€‚  

![alt text](/images/c810d2fa9f7769/image11.png)

GitHub Settings ã§ã™ã€‚GitHub Token ã‚’å…¥ã‚Œã¾ã™ã€‚  

![alt text](/images/c810d2fa9f7769/image12.png)

UI ã‚„ãƒãƒ£ãƒƒãƒˆã§ã®ä¼šè©±ã‚’æ—¥æœ¬èªã«ã™ã‚‹ã“ã¨ã‚‚ã§ããã†ã§ã™ã€‚  
ç²¾åº¦ã‚’æ±‚ã‚ã‚‹ãªã‚‰è‹±èªã®ã»ã†ãŒè‰¯ã•ãã†ã§ã™ã€‚ãŠå¥½ã¿ã§ã€‚  

![alt text](/images/c810d2fa9f7769/image13.png)


## Terraform ã§ä½¿ã£ã¦ã¿ãŸ

### å‰æ

OpenHands ã®æº–å‚™ãŒçµ‚ã‚ã£ãŸã®ã§ä½¿ã£ã¦ã„ãã¾ã™ã€‚  
å€‹äººã§ç¨¼åƒã—ã¦ã„ã‚‹ã‚·ã‚¹ãƒ†ãƒ ãŒã‚ã‚Šã¾ã—ã¦ã€ãã®ãƒªã‚½ãƒ¼ã‚¹ãŒ Terraform åŒ–ã®é€”ä¸­ã ã£ãŸã®ã§ãŠæ‰‹ä¼ã„ã—ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚  
å˜ç´”ãª ELB - ECS - Aurora ã®æ§‹æˆã ã¨è€ƒãˆã¦ãã ã•ã„ã€‚ELB ã¨ ECS ã¯ Terraform åŒ–ã—ã¦ã„ãŸã®ã§ã™ãŒã€Aurora ã¯æœªç€æ‰‹ãªçŠ¶æ…‹ã§ã™ã€‚  

OpenHands ã« Terraform ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã‚‚ã‚‰ã„ã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®ä¸€æ­©æ‰‹å‰ã¾ã§æº–å‚™ã—ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚  
Terraform ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚  

```bash
.
â”œâ”€â”€ unstable
â”‚   â”œâ”€â”€ import.tf
â”‚   â”œâ”€â”€ provider.tf
â”‚   â”œâ”€â”€ variables.tf
â”‚   â”œâ”€â”€ elb.tf
â”‚   â”œâ”€â”€ ecs.tf
â”‚   â””â”€â”€ aurora.tf  # OpenHands ã§ä½œæˆã—ã¦ã‚‚ã‚‰ã†
â””â”€â”€ modules
    â””â”€â”€ elb
        â”œâ”€â”€ main.tf
        â”œâ”€â”€ output.tf
        â””â”€â”€ variable.tf
    â””â”€â”€ ecs
        â”œâ”€â”€ main.tf
        â”œâ”€â”€ output.tf
        â””â”€â”€ variable.tf
    â””â”€â”€ aurora             # OpenHands ã§ä½œæˆã—ã¦ã‚‚ã‚‰ã†
        â”œâ”€â”€ main.tf        # OpenHands ã§ä½œæˆã—ã¦ã‚‚ã‚‰ã†
        â”œâ”€â”€ output.tf      # OpenHands ã§ä½œæˆã—ã¦ã‚‚ã‚‰ã†
        â””â”€â”€ variable.tf    # OpenHands ã§ä½œæˆã—ã¦ã‚‚ã‚‰ã†
```

### OpenHands ã‚„ã£ã¦ã¿ãŸ

OpenHands UI ã®ãƒ›ãƒ¼ãƒ ç”»é¢ã§ã™ã€‚  
`ãƒªãƒã‚¸ãƒˆãƒªã‚’é–‹ã` ã§æ—¢å­˜ã® Terraform ã‚³ãƒ¼ãƒ‰ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã‚’æŒ‡å®šã—ã¾ã™ã€‚  

![alt text](/images/c810d2fa9f7769/image14.png)

ãƒãƒ£ãƒƒãƒˆæ¬„ã«ã¯ä»¥ä¸‹ã‚’å…¥åŠ›ã—ã¾ã™ã€‚  

```
`modules` ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã« `aurora` ã¨ã„ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆã—ã€
AWS Aurora ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
```

ã‚¹ãƒ¬ãƒƒãƒ‰ãŒé–‹å§‹ã—ã¾ã™ã€‚ä¼šè©±ã—ã¦ãã‚Œã¾ã™ã­ã€‚å®Ÿè¡Œã‚’ä½•å›ã‹ç¹°ã‚Šè¿”ã—ã¦ã„ã¾ã™ã€‚  

![alt text](/images/c810d2fa9f7769/image.png)

2ã€œ3åˆ†å¾…ã¤ã¨ã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚ãã‚Œã£ã½ã„ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚ã„ã„ã§ã™ã­ã€œ    

:::details ã‚¯ãƒªãƒƒã‚¯ã—ã¦å±•é–‹
```terraform:main.tf
resource "aws_rds_cluster" "aurora_cluster" {
  cluster_identifier      = var.cluster_identifier
  engine                  = var.engine
  engine_version          = var.engine_version
  availability_zones      = data.aws_availability_zones.available.names
  database_name           = var.database_name
  master_username         = var.master_username
  master_password         = var.master_password
  backup_retention_period = var.backup_retention_period
  preferred_backup_window = var.preferred_backup_window
  vpc_security_group_ids  = [aws_security_group.aurora_sg.id]
  db_subnet_group_name    = aws_db_subnet_group.aurora_subnet_group.name
  skip_final_snapshot     = var.skip_final_snapshot

  tags = var.tags
}

resource "aws_rds_cluster_instance" "aurora_instances" {
  count              = var.instance_count
  identifier         = "${var.cluster_identifier}-${count.index + 1}"
  cluster_identifier = aws_rds_cluster.aurora_cluster.id
  instance_class     = var.instance_class
  engine             = aws_rds_cluster.aurora_cluster.engine
  engine_version     = aws_rds_cluster.aurora_cluster.engine_version

  tags = var.tags
}

resource "aws_db_subnet_group" "aurora_subnet_group" {
  name       = "${var.cluster_identifier}-subnet-group"
  subnet_ids = var.subnet_ids

  tags = var.tags
}

resource "aws_security_group" "aurora_sg" {
  name_prefix = "${var.cluster_identifier}-sg"
  vpc_id      = var.vpc_id

  ingress {
    from_port   = 3306
    to_port     = 3306
    protocol    = "tcp"
    cidr_blocks = var.allowed_cidr_blocks
  }

  egress {
    from_port   = 0
    to_port     = 0
    protocol    = "-1"
    cidr_blocks = ["0.0.0.0/0"]
  }

  tags = var.tags
}

data "aws_availability_zones" "available" {
  state = "available"
}
```

```terraform:variable.tf
variable "cluster_identifier" {
  description = "The cluster identifier for the Aurora cluster"
  type        = string
}

variable "engine" {
  description = "The name of the database engine to be used for this DB cluster"
  type        = string
  default     = "aurora-mysql"
}

variable "engine_version" {
  description = "The database engine version"
  type        = string
}

variable "instance_class" {
  description = "The instance class to use for the Aurora instances"
  type        = string
}

variable "instance_count" {
  description = "The number of instances to create in the cluster"
  type        = number
  default     = 2
}

variable "database_name" {
  description = "Name for an automatically created database on cluster creation"
  type        = string
}

variable "master_username" {
  description = "Username for the master DB user"
  type        = string
}

variable "master_password" {
  description = "Password for the master DB user"
  type        = string
}

variable "vpc_id" {
  description = "VPC ID to create the cluster in"
  type        = string
}

variable "subnet_ids" {
  description = "A list of VPC subnet IDs to create the cluster in"
  type        = list(string)
}

variable "allowed_cidr_blocks" {
  description = "A list of CIDR blocks that are allowed to access the database"
  type        = list(string)
  default     = []
}

variable "backup_retention_period" {
  description = "The days to retain backups for"
  type        = number
  default     = 7
}

variable "preferred_backup_window" {
  description = "The daily time range during which automated backups are created"
  type        = string
  default     = "02:00-03:00"
}

variable "skip_final_snapshot" {
  description = "Determines whether a final DB snapshot is created before the DB cluster is deleted"
  type        = bool
  default     = false
}

variable "tags" {
  description = "A map of tags to add to all resources"
  type        = map(string)
  default     = {}
}
```

```terraform:output.tf
output "cluster_endpoint" {
  description = "The cluster endpoint"
  value       = aws_rds_cluster.aurora_cluster.endpoint
}

output "cluster_reader_endpoint" {
  description = "The cluster reader endpoint"
  value       = aws_rds_cluster.aurora_cluster.reader_endpoint
}

output "cluster_id" {
  description = "The ID of the cluster"
  value       = aws_rds_cluster.aurora_cluster.id
}

output "cluster_resource_id" {
  description = "The Resource ID of the cluster"
  value       = aws_rds_cluster.aurora_cluster.cluster_resource_id
}

output "cluster_instances" {
  description = "A list of all cluster instance IDs"
  value       = aws_rds_cluster_instance.aurora_instances[*].id
}

output "security_group_id" {
  description = "The ID of the security group created for the Aurora cluster"
  value       = aws_security_group.aurora_sg.id
}

output "db_subnet_group_name" {
  description = "The name of the DB subnet group created for the Aurora cluster"
  value       = aws_db_subnet_group.aurora_subnet_group.name
}
```
:::

ç·¨é›†ãŒçµ‚ã‚ã‚‹ã¨ Push ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚PullRequest ã‚‚ä½œã£ã¦ãã‚Œã¾ã™ã€‚

![alt text](/images/c810d2fa9f7769/image-2.png)

----

ã‚¤ãƒ³ãƒãƒ¼ãƒˆç”¨ã® tf ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ä½œã£ã¦ã‚‚ã‚‰ã„ã¾ã—ã‚‡ã†ã€‚  
è‡ªåˆ†ãŒä½œã£ãŸãƒªã‚½ãƒ¼ã‚¹ã«åˆã‚ã›ãŸ Terraform ã‚³ãƒ¼ãƒ‰ã«ã—ãªã„ã¨ä½¿ã„ç‰©ã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚AI ã«å¯¾ã—ã¦ã‚ã„ã¾ã„ãªæŒ‡ç¤ºã¯ã”æ³•åº¦ã§ã™ã€‚
ã§ã™ã®ã§ã€ç¢ºã‹ã«å®Ÿéš›ã®è¨­å®šå€¤ã‚’ã‚³ãƒ¼ãƒ‰ã¸åæ˜ ã•ã›ã‚‹ãŸã‚ã« AWS CLI ã§å®Ÿæ©Ÿã®å€¤ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã€ãã‚Œã‚’èª­ã¿è¾¼ã‚“ã§ã‚‚ã‚‰ã„ã¾ã™ã€‚  

```
ç¨¼åƒä¸­ã® Aurora ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸã„ã§ã™ã€‚
`unstable` ä»¥ä¸‹ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã£ãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„ã€‚
ç¨¼åƒä¸­ã® Aurora ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®è¨­å®šå€¤ã¯ `clioutput/db-clusters.out`ã€
ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®è¨­å®šã¯ `clioutput/db-instances.out`ã‚’å‚ç…§ãã ã•ã„ã€‚
ã¾ãŸã€å¿…è¦ã«å¿œã˜ã¦ `modules/aurora` ä»¥ä¸‹ã‚‚ä¿®æ­£ãã ã•ã„ã€‚
```

ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«æ²¿ã£ã¦ã€å®Ÿè¡Œãƒ»ç·¨é›†ãƒ»èª­ã¿å–ã‚Šã‚’ç¹°ã‚Šè¿”ã—ã¦ã„ã¾ã™ã€‚å®Ÿéš›ã®è¨­å®šå€¤ã«åˆã‚ã›ã¦ãã‚Œã‚‹æ„Ÿã˜ãŒä¼ã‚ã£ã¦ãã¾ã™ã€‚  

![alt text](/images/c810d2fa9f7769/image-1.png)

---- 

`modules/aurora` ã¨ `unstable/aurora.tf` ãŒã¨ã‚Šã‚ãˆãšå®Œæˆã—ã¾ã—ãŸã€‚  
ã‚¤ãƒ³ãƒãƒ¼ãƒˆç”¨ã® `unstable/import.tf` ã‚‚ä½œã£ã¦ã‚‚ã‚‰ã„ã¾ã—ã‚‡ã†ã€‚  

```
ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚
ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã«ã¯ `unstable/import.tf` ã«æ—¢å­˜ãƒªã‚½ãƒ¼ã‚¹ã®è¨˜è¿°ãŒå¿…è¦ã§ã™ã€‚
`clioutput/db-clusters.out`ã€ `clioutput/db-instances.out` ã‚’èª­ã¿è¾¼ã‚“ã§é©åˆ‡ã«è¨˜è¿°ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚
```

![alt text](/images/c810d2fa9f7769/image-4.png)

### Terraform plan

Terraform import ã‚’ã—ãŸçµŒé¨“ãŒã‚ã‚‹æ–¹ã¯è§£ã£ã¦ãã‚Œã‚‹ã¨æ€ã„ã¾ã™ãŒã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¯è‹¦è¡Œã§ã™ç¬‘ã€‚  
æ—¢å­˜ãƒªã‚½ãƒ¼ã‚¹ã«åˆã‚ã›ã¦ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã‚¹ãƒˆãƒ¬ã‚¹ã¯è¡¨ç¾ã—ã‚ˆã†ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ç‹¬ã‚Šè¨€ãŒå¢—ãˆã¾ã™ã€‚  
ãã‚ŒãŒ OpenHands ã«ä»»ã›ã‚‹ã¨ã“ã“ã¾ã§10åˆ†å¼·ã§ã™ã€‚ã‚¹ãƒˆãƒ¬ã‚¹ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚ãªã‚“ã¦ã“ã¨ã§ã—ã‚‡ã†ï¼  

ãã‚Œã§ã¯ã¤ã„ã«ãã¾ã—ãŸ `terraform plan` ã‚’æ‰‹å‹•å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚  

```bash
$ terraform plan
â•·
â”‚ Error: Unsupported argument
â”‚ 
â”‚   on aurora.tf line 7, in module "aurora":
â”‚    7:   availability_zones      = ["ap-northeast-1c", "ap-northeast-1a", "ap-northeast-1d"]
â”‚ 
â”‚ An argument named "availability_zones" is not expected here.
â•µ
â•·
â”‚ Error: Unsupported argument
â”‚ 
â”‚   on aurora.tf line 9, in module "aurora":
â”‚    9:   instances               = 1
â”‚ 
â”‚ An argument named "instances" is not expected here.
â•µ
ï¼ˆä»¥ä¸‹çœç•¥ï¼‰
```

ã‚ºã‚³ãƒ¼ãƒ¼ãƒ¼  
ã¾ã‚äºˆæƒ³é€šã‚Šã§ã™ã€‚ã„ããªã‚Šã™ã¹ã¦ãŒå®Œç’§ã«å®Œäº†ã™ã‚‹ã‚ã‘ãŒã‚ã‚Šã¾ã›ã‚“ã€‚  
ã‚¨ãƒ©ãƒ¼ã®è§£æ¶ˆã¯ `terraform plan` ã‚’æµã—ãªãŒã‚‰ä¿®æ­£ã—ã¦ã‚‚ã‚‰ã„ã—ã‚‡ã†ã€‚  
ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ AWS ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã‚’æ¸¡ã— `terraform plan` ã‚’å®Ÿè¡Œã—ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚  

```
æ¬¡ã®ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã‚’ä½¿ã£ã¦ `terraform plan`ã‚’è©¦ã—ã¦ãã ã•ã„

AWS_REGION=ap-northeast-1
AWS_SECRET_ACCESS_KEY=ï¼ˆä»¥ä¸‹çœç•¥ï¼‰
```

![alt text](/images/c810d2fa9f7769/image-5.png)

ã¯ã„ã€ç‹™ã„é€šã‚Š `terraform plan` ã®å‡ºåŠ›ã‚’ã¿ã¦ tf ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£ã—ã¦ãã‚Œã¦ã„ã¾ã™ã€‚ä»²è‰¯ã—ã€‚  


![alt text](/images/c810d2fa9f7769/image-6.png)


----

ä½•åº¦ã‹ã®ã‚„ã‚Šã¨ã‚Šã®å¾Œã€ã²ã¨é€šã‚Šã®ä¿®æ­£ãŒçµ‚ã‚ã£ãŸã‚ˆã†ã§ã™ã€‚  
å¤‰æ›´å†…å®¹ã‚’è¦‹ãŸã„ã®ã§ä»¥ä¸‹ã‚’ãŠé¡˜ã„ã—ã¦ã¿ã¾ã™ã€‚  

```
ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ä»Šå›ã®å¤‰æ›´å†…å®¹ã®Diffã‚’è¡¨ç¤ºã—ã¦ãã ã•ã„ã€‚
```


![alt text](/images/c810d2fa9f7769/image-7.png)

ä¸Šã¯çœç•¥ã—ã¦ã¾ã™ãŒã€ã™ã¹ã¦ã®å¤‰æ›´å†…å®¹ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚  
å•é¡Œãªã•ãã†ãªã®ã§ãƒªãƒã‚¸ãƒˆãƒªã¸ Push ã—ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚  

----

Push ã—ã¦ã‚‚ã‚‰ã£ãŸã®ã§ã™ãŒã€ã„ã¾ã„ã¡åæ˜ ã•ã‚Œã¦ã„ãªã„ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã—ãŸã€‚  
è¨˜è¿°ãŒä¸è¶³ã—ã¦ã„ã‚‹ç®‡æ‰€ã‚’èª¿æŸ»ã—ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚  

```
ã‚‚ã†1åº¦ç¢ºèªã•ã›ã¦ãã ã•ã„ã€‚
ä»¥ä¸‹ã®è¨˜è¿°ãŒå«ã¾ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ãƒ•ãƒ«ãƒ‘ã‚¹ã§æ•™ãˆã¦ãã ã•ã„ã€‚

# Aurora DB Cluster
import {
  to = module.aurora.aws_rds_cluster.this
  id = "name"
}

# Aurora DB Instance
import {
  to = module.aurora.aws_rds_cluster_instance.this[0]
  id = "name-instance"
}
```

![alt text](/images/c810d2fa9f7769/image-8.png)

ãªã‚‹ã»ã©ã€ä¿®æ­£ã®é€”ä¸­ã§ãƒ‡ã‚°ãƒ¬ãŒç™ºç”Ÿã—ãŸã‚ˆã†ã§ã™ã€‚äººé–“ãŒã‚„ã£ã¦ã‚‚èµ·ã“ã‚Šã†ã‚‹ã“ã¨ã§ã™ã€‚  

```
ãã®è¨˜è¿°ã‚’å†åº¦è¿½åŠ ã—ãŸã„ã®ã§æ–°ã—ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«åˆã‚ã›ãŸå½¢å¼ã§ `unstable/import.tf`ã¸è¿½è¨˜ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚
```

![alt text](/images/c810d2fa9f7769/image-9.png)

![alt text](/images/c810d2fa9f7769/image-10.png)

ä¿®æ­£ã‚’ Push ã—ã¦ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚  
æœ€å¾Œã«ã­ãã‚‰ã„ã®è¨€è‘‰ã‚’ã‹ã‘ã¦çµ‚äº†ã§ã™ã€‚  


### ãŠã¾ã‘

ç§ã®æ–¹ã§ä¿®æ­£ã‚’å·®ã—è¾¼ã‚“ã ã‚Šã€CI ã§ Lint ã‚’ã—ã¦ã„ã‚‹é–¢ä¿‚ã§ã¡ã‚‡ãã¡ã‚‡ãã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆãŒç™ºç”Ÿã—ã¾ã™ã€‚  
ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã‚’æ¤œå‡ºã—ã¦è‡ªå‹•çš„ã«è§£æ±ºã—ã¦ãã‚Œã¾ã—ãŸã€‚  

![alt text](/images/c810d2fa9f7769/image-3.png)

## æ‰€æ„Ÿ

**ã™ã”ã„ãƒ»ãƒ»ãƒ»è¦ªçˆ¶ãŒç†±ä¸­ã™ã‚‹ã‚ã‘ã ã€‚**

X ã§ Devin ã‚„ Cursor ãŒé¨’ãŒã‚Œã¦ã„ã‚‹ç†ç”±ãŒã‚ˆãåˆ†ã‹ã‚Šã¾ã—ãŸã€‚  
Terraform ã§ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨ã„ã†æ¯”è¼ƒçš„å®šå‹ãªã‚³ãƒ¼ãƒ‰ç”Ÿæˆã§ã¯ã‚ã‚Šã¾ã—ãŸãŒã€ã‹ãªã‚Šã®å®Œæˆåº¦ã ã£ãŸã¨æ€ã„ã¾ã™ã€‚  
ã‚¼ãƒ­ã‹ã‚‰æ›¸ã„ã¦ã„ã‚‹ã‚ˆã‚Šã‚‚ 50ã€œ70%ã®æ™‚é–“ã§å®Œäº†ã—ã¾ã—ãŸã€‚åŠ¹ç‡åŒ–ã®åŠ¹æœã¯å¤§ãã„ã§ã™ã€‚  
ã€Œé»™ã£ã¦å®Ÿè¡Œã™ã‚Œã°å‹•ãã€ã‚³ãƒ¼ãƒ‰ã«ã¯ãªã‚Šã¾ã›ã‚“ãŒã€äººé–“ãŒå¾®ä¿®æ­£ã™ã‚Œã°è‰¯ã„ãƒ¬ãƒ™ãƒ«ã«ã¯ãªã£ã¦ã„ã¾ã™ã€‚  

è¿½åŠ æ¤œè¨¼ã¯ã—ã¦ã„ã¾ã›ã‚“ãŒã€ä»Šå›ã®é‡è¦ãªè¦ç´ ã¯ä»¥ä¸‹ã ã¨è€ƒãˆã¾ã™ã€‚  

- å‚ç…§ã¨ãªã‚‹æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ãŒã‚ã£ãŸ
  - ã‚¹ã‚¯ã‚·ãƒ§ã¯è²¼ã£ã¦ã„ãªã„ã§ã™ãŒã€æ—¢å­˜ã® Terraform ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã‚“ã§ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚’é–‹å§‹ã—ã¦ã„ã¾ã—ãŸ
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãªã‚‹å®Ÿéš›ã®è¨­å®šã‚’æ¸¡ã—ã¦ã„ãŸ
  - ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨ã„ã†ã‚¿ã‚¹ã‚¯ã®ç‰¹æ€§ä¸Šã€è¨­å®šå€¤ã¯ä¸å¯æ¬ 
- å¯èƒ½ãªé™ã‚Šå…·ä½“çš„ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ›¸ã„ãŸ
  - ã‚ã„ã¾ã„ãªæŒ‡ç¤ºã ã¨ã€æœŸå¾…ã‹ã‚‰å¤–ã‚ŒãŸè¡Œå‹•ã‚’ã—ã¦ã—ã¾ã„ã¾ã™
  - [Prompting Best Practices](https://docs.all-hands.dev/modules/usage/prompting/prompting-best-practices) å‚è€ƒã«ã—ãªãŒã‚‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ›¸ãã¨è‰¯ã„ã‹ã‚‚

æœ€å¾Œã«ä½™è«‡ã§ã™ãŒã€ç§ã®ãƒªãƒã‚¸ãƒˆãƒªã§ã¯ AI PR Reviewer ã‚’å°å…¥ã—ã¦ã„ã¾ã™ã€‚  
OpenHands ãŒ PR ã‚’ä½œã‚‹ã¨ã€ŒAI ãŒä½œã£ãŸã‚³ãƒ¼ãƒ‰ã‚’ AI ãŒãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ã€ã¨ã„ã†è¿‘æœªæ¥ãŒå£é–“è¦‹ãˆã¾ã™ã€‚

